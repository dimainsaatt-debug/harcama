<!DOCTYPE html>
<html lang="tr" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dima Ä°nÅŸaat - Genel Harcamalar</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'DM Sans', sans-serif;
      background-color: #111;
      color: #fff;
    }
    .expense-row:hover { background-color: #222; }
    .btn-primary { transition: all 0.2s ease; }
    .btn-primary:hover { background-color: #333; }
    .category-badge { padding: 0.25rem 0.5rem; border-radius: 9999px; font-size: 0.85rem; }
    table th, table td { border-bottom: 1px solid #333; }
  </style>
</head>
<body class="h-full">
  <div class="max-w-4xl mx-auto p-6">
    <h1 class="text-3xl font-bold text-white mb-4">ğŸ—ï¸ Dima Ä°nÅŸaat - Genel Harcamalar</h1>
    
    <!-- Toplam -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
      <div class="bg-gray-900 rounded-xl p-4 text-center">
        <p class="text-gray-400 text-sm">Toplam Harcama</p>
        <p id="total-amount" class="text-xl font-bold">â‚º0,00</p>
      </div>
      <div class="bg-gray-900 rounded-xl p-4 text-center">
        <p class="text-gray-400 text-sm">KayÄ±t SayÄ±sÄ±</p>
        <p id="total-count" class="text-xl font-bold">0</p>
      </div>
      <div class="bg-gray-900 rounded-xl p-4 text-center">
        <p class="text-gray-400 text-sm">En YÃ¼ksek</p>
        <p id="max-amount" class="text-xl font-bold">â‚º0,00</p>
      </div>
    </div>

    <!-- Harcama Ekle -->
    <div class="bg-gray-900 rounded-xl p-6 mb-6">
      <h2 class="text-lg font-semibold mb-4">â• Yeni Harcama Ekle</h2>
      <form id="expense-form" class="grid grid-cols-1 md:grid-cols-4 gap-4">
        <div>
          <label for="description" class="text-gray-400 text-sm mb-1 block">AÃ§Ä±klama</label>
          <input type="text" id="description" placeholder="Ne iÃ§in harcandÄ±?" class="w-full bg-gray-800 px-4 py-2 rounded-lg text-white placeholder-gray-500">
        </div>
        <div>
          <label for="amount" class="text-gray-400 text-sm mb-1 block">Tutar (â‚º)</label>
          <input type="number" id="amount" placeholder="0,00" step="0.01" min="0" class="w-full bg-gray-800 px-4 py-2 rounded-lg text-white placeholder-gray-500">
        </div>
        <div>
          <label for="category" class="text-gray-400 text-sm mb-1 block">Kategori</label>
          <select id="category" class="w-full bg-gray-800 px-4 py-2 rounded-lg text-white">
            <option value="Beton">ğŸ§± Beton</option>
            <option value="Demir">ğŸ› ï¸ Demir</option>
            <option value="Ä°ÅŸÃ§ilik">ğŸ‘· Ä°ÅŸÃ§ilik</option>
            <option value="Nakliye">ğŸšš Nakliye</option>
            <option value="Malzeme">ğŸ“¦ Malzeme</option>
            <option value="DiÄŸer">ğŸ’¼ DiÄŸer</option>
          </select>
        </div>
        <div>
          <label for="date" class="text-gray-400 text-sm mb-1 block">Tarih</label>
          <input type="date" id="date" class="w-full bg-gray-800 px-4 py-2 rounded-lg text-white">
        </div>
        <div class="md:col-span-4">
          <button type="submit" class="btn-primary w-full bg-white text-black font-semibold py-2 rounded-lg mt-2">Ekle</button>
        </div>
      </form>
    </div>

    <!-- Harcama Tablosu -->
    <div class="bg-gray-900 rounded-xl p-4">
      <table class="w-full text-left">
        <thead>
          <tr>
            <th class="px-4 py-2 text-gray-400">AÃ§Ä±klama</th>
            <th class="px-4 py-2 text-gray-400">Kategori</th>
            <th class="px-4 py-2 text-gray-400">Tarih</th>
            <th class="px-4 py-2 text-gray-400 text-right">Tutar</th>
            <th class="px-4 py-2 text-gray-400 text-center">Sil</th>
          </tr>
        </thead>
        <tbody id="expense-list">
          <!-- KayÄ±tlar buraya gelecek -->
        </tbody>
      </table>
      <p id="empty-state" class="text-gray-500 text-center mt-4">HenÃ¼z harcama kaydÄ± yok.</p>
    </div>
  </div>

  <script>
    let expenses = [];

    function formatCurrency(amount){
      return new Intl.NumberFormat('tr-TR',{style:'currency',currency:'TRY'}).format(amount);
    }

    function updateSummary(){
      const total = expenses.reduce((sum,e)=>sum+e.amount,0);
      const max = expenses.length>0?Math.max(...expenses.map(e=>e.amount)):0;
      document.getElementById('total-amount').textContent = formatCurrency(total);
      document.getElementById('total-count').textContent = expenses.length;
      document.getElementById('max-amount').textContent = formatCurrency(max);
    }

    function renderExpenses(){
      const listEl = document.getElementById('expense-list');
      const emptyEl = document.getElementById('empty-state');
      listEl.innerHTML='';
      if(expenses.length===0){ emptyEl.classList.remove('hidden'); return; }
      emptyEl.classList.add('hidden');
      expenses.forEach((e,i)=>{
        const row=document.createElement('tr');
        row.className='expense-row';
        row.innerHTML=`
          <td class="px-4 py-2">${e.description}</td>
          <td class="px-4 py-2"><span class="category-badge bg-gray-800 text-white">${e.category}</span></td>
          <td class="px-4 py-2">${e.date}</td>
          <td class="px-4 py-2 text-right">${formatCurrency(e.amount)}</td>
          <td class="px-4 py-2 text-center">
            <button onclick="deleteExpense(${i})" class="text-red-500 font-semibold">Sil</button>
          </td>
        `;
        listEl.appendChild(row);
      });
    }

    function deleteExpense(index){
      if(confirm('Bu kaydÄ± silmek istiyor musunuz?')){
        expenses.splice(index,1);
        renderExpenses();
        updateSummary();
      }
    }

    document.getElementById('expense-form').addEventListener('submit',function(e){
      e.preventDefault();
      const desc=document.getElementById('description').value.trim();
      const amount=parseFloat(document.getElementById('amount').value);
      const category=document.getElementById('category').value;
      const date=document.getElementById('date').value;
      if(!desc||isNaN(amount)||amount<=0||!date){ alert('LÃ¼tfen tÃ¼m alanlarÄ± doÄŸru doldurun'); return; }
      expenses.push({description:desc,amount,category,date});
      renderExpenses();
      updateSummary();
      // formu temizle
      document.getElementById('description').value='';
      document.getElementById('amount').value='';
      document.getElementById('date').value=new Date().toISOString().split('T')[0];
    });

    // bugÃ¼nÃ¼n tarihi
    document.getElementById('date').value=new Date().toISOString().split('T')[0];
  </script>
</body>
</html>
