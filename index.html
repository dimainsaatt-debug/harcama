<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Dima İnşaat | Şantiye Takip</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-black text-white font-sans">

  <!-- HEADER -->
  <header class="border-b border-gray-700 p-6">
    <h1 class="text-3xl font-bold tracking-wide">DİMA İNŞAAT</h1>
    <p class="text-gray-400 mt-1">Şantiye Takip Sistemi • İç Kullanım</p>
  </header>

  <main class="max-w-6xl mx-auto p-6 space-y-10">

    <!-- ÖZET -->
    <section class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="border border-gray-700 p-5 rounded-xl">
        <p class="text-gray-400 text-sm">Toplam Harcama</p>
        <p id="totalExpense" class="text-2xl font-bold mt-1">₺0</p>
      </div>
      <div class="border border-gray-700 p-5 rounded-xl">
        <p class="text-gray-400 text-sm">Toplam Kayıt</p>
        <p id="expenseCount" class="text-2xl font-bold mt-1">0</p>
      </div>
      <div class="border border-gray-700 p-5 rounded-xl">
        <p class="text-gray-400 text-sm">Toplam Beton</p>
        <p id="totalConcrete" class="text-2xl font-bold mt-1">0 m³</p>
      </div>
    </section>

    <!-- HARCAMA EKLE -->
    <section class="border border-gray-700 rounded-xl p-6">
      <h2 class="text-xl font-semibold mb-4">Harcama Ekle</h2>

      <form id="expenseForm" class="grid grid-cols-1 md:grid-cols-5 gap-4">
        <input type="text" id="expDesc" placeholder="Açıklama" class="bg-black border border-gray-600 p-3 rounded" required>
        <input type="number" id="expAmount" placeholder="Tutar (₺)" class="bg-black border border-gray-600 p-3 rounded" required>
        <select id="expCategory" class="bg-black border border-gray-600 p-3 rounded">
          <option>İnşaat Malzemesi</option>
          <option>İşçilik</option>
          <option>Beton</option>
          <option>Demir</option>
          <option>Nakliye</option>
          <option>Elektrik</option>
          <option>Su & Tesisat</option>
          <option>Boya</option>
          <option>Ruhsat & Resmi</option>
          <option>Diğer</option>
        </select>
        <input type="date" id="expDate" class="bg-black border border-gray-600 p-3 rounded" required>
        <button class="border border-white rounded p-3 hover:bg-white hover:text-black transition">Ekle</button>
      </form>
    </section>

    <!-- HARCAMA LİSTESİ -->
    <section class="border border-gray-700 rounded-xl overflow-hidden">
      <table class="w-full text-sm">
        <thead class="bg-gray-900">
          <tr>
            <th class="p-3 text-left">Tarih</th>
            <th class="p-3 text-left">Açıklama</th>
            <th class="p-3 text-left">Kategori</th>
            <th class="p-3 text-right">Tutar</th>
          </tr>
        </thead>
        <tbody id="expenseList"></tbody>
      </table>
    </section>

    <!-- BETON DÖKÜM DEFTERİ -->
    <section class="border border-gray-700 rounded-xl p-6">
      <h2 class="text-xl font-semibold mb-4">Beton Döküm Defteri</h2>

      <form id="concreteForm" class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6">
        <input type="date" id="betonDate" class="bg-black border border-gray-600 p-3 rounded" required>
        <input type="text" id="betonArea" placeholder="Kat / Bölge" class="bg-black border border-gray-600 p-3 rounded" required>
        <input type="text" id="betonClass" placeholder="C25 / C30" class="bg-black border border-gray-600 p-3 rounded">
        <input type="number" id="betonAmount" placeholder="m³" class="bg-black border border-gray-600 p-3 rounded" required>
        <button class="border border-white rounded p-3 hover:bg-white hover:text-black transition">Ekle</button>
      </form>

      <table class="w-full text-sm">
        <thead class="bg-gray-900">
          <tr>
            <th class="p-3 text-left">Tarih</th>
            <th class="p-3 text-left">Bölge</th>
            <th class="p-3 text-left">Sınıf</th>
            <th class="p-3 text-right">m³</th>
          </tr>
        </thead>
        <tbody id="concreteList"></tbody>
      </table>
    </section>

  </main>

<script>
  const expenses = JSON.parse(localStorage.getItem("expenses")) || [];
  const concretes = JSON.parse(localStorage.getItem("concretes")) || [];

  const expenseList = document.getElementById("expenseList");
  const concreteList = document.getElementById("concreteList");

  function render() {
    expenseList.innerHTML = "";
    concreteList.innerHTML = "";

    let total = 0;
    expenses.forEach(e => {
      total += e.amount;
      expenseList.innerHTML += `
        <tr class="border-t border-gray-800">
          <td class="p-3">${e.date}</td>
          <td class="p-3">${e.desc}</td>
          <td class="p-3">${e.cat}</td>
          <td class="p-3 text-right">₺${e.amount}</td>
        </tr>`;
    });

    let betonToplam = 0;
    concretes.forEach(b => {
      betonToplam += b.amount;
      concreteList.innerHTML += `
        <tr class="border-t border-gray-800">
          <td class="p-3">${b.date}</td>
          <td class="p-3">${b.area}</td>
          <td class="p-3">${b.class}</td>
          <td class="p-3 text-right">${b.amount}</td>
        </tr>`;
    });

    document.getElementById("totalExpense").innerText = "₺" + total;
    document.getElementById("expenseCount").innerText = expenses.length;
    document.getElementById("totalConcrete").innerText = betonToplam + " m³";

    localStorage.setItem("expenses", JSON.stringify(expenses));
    localStorage.setItem("concretes", JSON.stringify(concretes));
  }

  document.getElementById("expenseForm").onsubmit = e => {
    e.preventDefault();
    expenses.push({
      desc: expDesc.value,
      amount: Number(expAmount.value),
      cat: expCategory.value,
      date: expDate.value
    });
    e.target.reset();
    render();
  };

  document.getElementById("concreteForm").onsubmit = e => {
    e.preventDefault();
    concretes.push({
      date: betonDate.value,
      area: betonArea.value,
      class: betonClass.value,
      amount: Number(betonAmount.value)
    });
    e.target.reset();
    render();
  };

  render();
</script>

</body>
</html>
