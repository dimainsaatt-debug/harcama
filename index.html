<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Dima Ä°nÅŸaat | Åžantiye YÃ¶netimi</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-black text-white">

<!-- GÄ°RÄ°Åž -->
<div id="login" class="min-h-screen flex items-center justify-center">
  <div class="border border-gray-700 p-6 rounded-xl w-80">
    <h2 class="text-xl font-bold mb-4">Dima Ä°nÅŸaat</h2>
    <input id="pass" type="password" placeholder="Åžifre"
      class="w-full bg-black border border-gray-600 p-3 rounded mb-4">
    <button onclick="login()" class="w-full border border-white p-3 rounded hover:bg-white hover:text-black">
      GiriÅŸ
    </button>
  </div>
</div>

<!-- UYGULAMA -->
<div id="app" class="hidden">

<header class="border-b border-gray-700 p-6">
  <h1 class="text-3xl font-bold">DÄ°MA Ä°NÅžAAT</h1>
  <p class="text-gray-400">Åžantiye YÃ¶netim Sistemi â€¢ Ä°Ã§ KullanÄ±m</p>
</header>

<main class="max-w-7xl mx-auto p-6 space-y-12">

<!-- Ã–ZET -->
<section class="grid grid-cols-1 md:grid-cols-3 gap-6">
  <div class="border border-gray-700 p-4 rounded">Toplam Harcama: <span id="sumExpense">â‚º0</span></div>
  <div class="border border-gray-700 p-4 rounded">Toplam Beton: <span id="sumBeton">0 mÂ³</span></div>
  <div class="border border-gray-700 p-4 rounded">Toplam Demir: <span id="sumDemir">0 kg</span></div>
</section>

<!-- DEMÄ°R DEFTERÄ° -->
<section class="border border-gray-700 rounded p-6">
<h2 class="text-xl mb-4">ðŸ§± Demir Defteri</h2>
<form id="demirForm" class="grid grid-cols-1 md:grid-cols-6 gap-3 mb-4">
<input type="date" required id="dDate" class="input">
<input placeholder="Kat / BÃ¶lge" required id="dArea" class="input">
<select id="dType" class="input">
<option>Ã˜8</option><option>Ã˜10</option><option>Ã˜12</option><option>HasÄ±r</option>
</select>
<input type="number" placeholder="kg" required id="dKg" class="input">
<input placeholder="TedarikÃ§i" id="dSup" class="input">
<button class="btn">Ekle</button>
</form>
<table class="w-full text-sm"><tbody id="demirList"></tbody></table>
</section>

<!-- Ä°ÅžÃ‡Ä°LÄ°K -->
<section class="border border-gray-700 rounded p-6">
<h2 class="text-xl mb-4">ðŸ‘· Ä°ÅŸÃ§ilik Takibi</h2>
<form id="isciForm" class="grid grid-cols-1 md:grid-cols-7 gap-3 mb-4">
<input placeholder="Usta" required id="iName" class="input">
<input placeholder="Ä°ÅŸ TÃ¼rÃ¼" required id="iJob" class="input">
<input placeholder="GÃ¼nlÃ¼k / ParÃ§a" id="iType" class="input">
<input type="number" placeholder="HakediÅŸ" required id="iTotal" class="input">
<input type="number" placeholder="Ã–denen" required id="iPaid" class="input">
<button class="btn col-span-2">Ekle</button>
</form>
<table class="w-full text-sm"><tbody id="isciList"></tbody></table>
</section>

<!-- NAKLÄ°YE -->
<section class="border border-gray-700 rounded p-6">
<h2 class="text-xl mb-4">ðŸšš Nakliye</h2>
<form id="nakliyeForm" class="grid grid-cols-1 md:grid-cols-6 gap-3 mb-4">
<input placeholder="YÃ¼k" required id="nLoad" class="input">
<input placeholder="Nereden" required id="nFrom" class="input">
<input placeholder="Nereye" required id="nTo" class="input">
<input placeholder="Plaka" id="nPlate" class="input">
<input type="number" placeholder="â‚º" required id="nPrice" class="input">
<button class="btn">Ekle</button>
</form>
<table class="w-full text-sm"><tbody id="nakliyeList"></tbody></table>
</section>

<!-- ÅžANTÄ°YE GÃœNLÃœÄžÃœ -->
<section class="border border-gray-700 rounded p-6">
<h2 class="text-xl mb-4">ðŸ§  Åžantiye GÃ¼nlÃ¼ÄŸÃ¼</h2>
<form id="noteForm" class="flex gap-3 mb-4">
<input type="date" required id="noteDate" class="input w-40">
<input placeholder="Not" required id="noteText" class="input flex-1">
<button class="btn">Ekle</button>
</form>
<ul id="noteList" class="space-y-2"></ul>
</section>

</main>
</div>

<style>
.input{background:black;border:1px solid #555;padding:10px;border-radius:6px}
.btn{border:1px solid white;padding:10px;border-radius:6px}
</style>

<script>
const db = k => JSON.parse(localStorage.getItem(k)||"[]");
const save=(k,v)=>localStorage.setItem(k,JSON.stringify(v));

let demir=db("demir"), isci=db("isci"), nakliye=db("nakliye"), notes=db("notes");

function login(){
  const p=pass.value;
  if(!localStorage.getItem("pw")) localStorage.setItem("pw",p);
  if(p===localStorage.getItem("pw")){
    loginDiv.style.display="none"; app.classList.remove("hidden");
    render();
  } else alert("Åžifre yanlÄ±ÅŸ");
}

const loginDiv=document.getElementById("login");

function render(){
  demirList.innerHTML="";
  let dSum=0;
  demir.forEach((x,i)=>{
    dSum+=x.kg;
    demirList.innerHTML+=`<tr><td>${x.date}</td><td>${x.area}</td><td>${x.type}</td><td>${x.kg}</td>
    <td>${x.sup||""}</td><td><button onclick="del('demir',${i})">Sil</button></td></tr>`;
  });
  sumDemir.innerText=dSum+" kg";

  isciList.innerHTML="";
  isci.forEach((x,i)=>{
    isciList.innerHTML+=`<tr><td>${x.name}</td><td>${x.job}</td>
    <td>Kalan: ${x.total-x.paid}</td><td><button onclick="del('isci',${i})">Sil</button></td></tr>`;
  });

  nakliyeList.innerHTML="";
  nakliye.forEach((x,i)=>{
    nakliyeList.innerHTML+=`<tr><td>${x.load}</td><td>${x.from}â†’${x.to}</td><td>${x.price}</td>
    <td><button onclick="del('nakliye',${i})">Sil</button></td></tr>`;
  });

  noteList.innerHTML="";
  notes.forEach((x,i)=>{
    noteList.innerHTML+=`<li>${x.date} - ${x.text} <button onclick="del('notes',${i})">Sil</button></li>`;
  });
}

function del(k,i){
  if(confirm("Silinsin mi?")){
    let arr=db(k); arr.splice(i,1); save(k,arr);
    location.reload();
  }
}
</script>

</body>
</html>
